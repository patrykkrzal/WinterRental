<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Test API WinterRental</title>
</head>
<body>
    <h1>Rejestracja użytkownika</h1>
    <form id="registerForm">
        <input type="text" id="firstName" placeholder="Imię" required><br>
        <input type="text" id="lastName" placeholder="Nazwisko" required><br>
        <input type="text" id="login" placeholder="Login" required><br>
        <input type="password" id="password" placeholder="Hasło" required><br>
        <input type="email" id="email" placeholder="Email" required><br>
        <input type="text" id="phone" placeholder="Telefon" required><br>
        <input type="text" id="address" placeholder="Adres" required><br>
        <button type="submit">Zarejestruj</button>
    </form>

    <h1>Logowanie</h1>
    <form id="loginForm">
        <input type="text" id="loginLogin" placeholder="Login" required><br>
        <input type="password" id="loginPassword" placeholder="Hasło" required><br>
        <button type="submit">Zaloguj</button>
    </form>

    <h2>Odpowiedź:</h2>
    <pre id="response"></pre>

    <script>
        const apiUrl = "https://localhost:5001/api/auth"; // zmień port jeśli potrzebny

        // ---------------- Rejestracja ----------------
        document.getElementById("registerForm").addEventListener("submit", async (e) => {
            e.preventDefault();

            const data = {
                firstName: document.getElementById("firstName").value,
                lastName: document.getElementById("lastName").value,
                login: document.getElementById("login").value,
                password: document.getElementById("password").value,
                email: document.getElementById("email").value,
                phoneNumber: document.getElementById("phone").value,
                address: document.getElementById("address").value
            };

            const res = await fetch(`${apiUrl}/register`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            });

            const text = await res.text();
            document.getElementById("response").innerText = text;
        });

        // ---------------- Logowanie ----------------
        document.getElementById("loginForm").addEventListener("submit", async (e) => {
            e.preventDefault();

            const data = {
                login: document.getElementById("loginLogin").value,
                password: document.getElementById("loginPassword").value
            };

            const res = await fetch(`${apiUrl}/login`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            });

            const json = await res.json();
            document.getElementById("response").innerText = JSON.stringify(json, null, 2);
        });
    </script>
</body>
</html>
